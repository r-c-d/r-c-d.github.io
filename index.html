<!-- Copyright 2020 International Rice research Institute -->
<html>
    <head>
      <meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0' name='viewport'/>
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
      
      <style type="text/css">
        @media (max-width: 720px) {
          .formContainer {width:100%;}
        }

        @media (min-width: 721px) {
          .formContainer {width:450px;}
        }

        .valueLabelDisplay{
          padding-top:5px;
          padding-bottom:5px;
          width:85px;
        }

        .valueDisplay{
          padding-top:5px;
          padding-bottom:5px;
        }

        .fullWidth{
          width:100%;
        }

        .borderBottom{
          border-bottom:1px solid #cccccc;
        }

      </style>
    </head>
<body>
    <?php
      $curl = curl_init();
      # 3a4ftp-cr6
      if(isset($_GET["tracker"])){
          $trackerCode = $_GET["tracker"];
          curl_setopt_array($curl, array(
            // CURLOPT_URL => 'https://roqz9dla94.execute-api.ap-southeast-1.amazonaws.com/prod/seedtrack?trxno=' . $trackerCode,
            CURLOPT_URL => 'https://b4rapidev.irri.org/v2/shipments/' . $trackerCode . '/tracking-status',
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_ENCODING => "",
            CURLOPT_MAXREDIRS => 10,
            CURLOPT_TIMEOUT => 30,
            CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
            // CURLOPT_HTTPHEADER => array('content-type: application/json; charset=utf-8', 'x-api-key: 2XhHLU1iyj8Kp8tu8nq0R3PayiOKHxTcqTg91pwj'),
            CURLOPT_HTTPHEADER => array('content-type: application/json; charset=utf-8', 'Authorization: Bearer TvsfHJfBDgImvIZloigequ5eG8vIc3YoaVb43mH5'),
          ));
          $response = curl_exec($curl);
          $err = curl_error($curl);
          curl_close($curl);
          if ($err) {
            echo "cURL Error :" . $err;
          } else {
            $obj = json_decode($response);
          }
      }
    ?>  
    <div class="container">
      <div class="formContainer" style="padding:20px;background-color:#ececec;border-radius:5px;margin-top:20px;margin-bottom:20px;margin-left:auto;margin-right:auto;border:1px solid #cecece;">  
        <div><img src="https://www.irri.org/sites/all/themes/custom/irri/images/IRRI-logo.svg"></div>
        <div class="text-center display-4" style="padding-bottom:20px;">Seed Tracker</div>
        <form action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"], ENT_QUOTES);?>" method="get">
          <div class="input-group flex-nowrap" style="margin-bottom:20px;">
            <div class="input-group-prepend">
              <span class="input-group-text" id="addon-wrapping">Tracker</span>
            </div>
            <input id="trackingCode" name="tracker" type="text" class="form-control" value="" placeholder="enter a valid tracking number" aria-label="" aria-describedby="addon-wrapping">
          </div>
          <div class="float-right" style="margin-bottom:0px;">
            <input id="submit" type="submit" class="btn btn-primary btn-lg" value="   Submit   " />
          </div>
          <div style="clear:both;"></div>
        </form>
        <div class="fullWidth">
<!--           <div class="fullWidth clearfix borderBottom">
            <div class="valueLabelDisplay float-left">As of date: </div>
            <div class="valueDisplay float-left"><?php if(isset($obj->asofdate)){echo $obj->asofdate;} ?></div>
          </div>
          <div class="fullWidth clearfix borderBottom">
            <div class="valueLabelDisplay float-left">Quantity: </div>
            <div class="valueDisplay float-left"><?php if(isset($obj->qty)){echo $obj->qty;} ?></div>
          </div> -->
          <div class="fullWidth clearfix borderBottom">
            <div class="valueLabelDisplay float-left">Status: </div>
            <div class="valueDisplay float-left"><?php if(isset($obj->status)){echo $obj->status;} ?></div>
          </div>
<!--           <div class="fullWidth clearfix borderBottom">
            <div class="valueLabelDisplay float-left">Tracker: </div>
            <div class="valueDisplay float-left"><?php if(isset($obj->tracker)){echo $obj->tracker;} ?></div>
          </div>
          <div class="fullWidth clearfix ">
            <div class="valueLabelDisplay float-left">Variety: </div>
            <div class="valueDisplay float-left"><?php if(isset($obj->variety)){echo $obj->variety;} ?></div>
          </div> -->
        </div>
        <div style="clear:both;"></div>
      </div>  
    </div>
</body>
</html>
